<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.2"/>




  <meta name="keywords" content="前端," />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.2" />




  <title> react-router-redux 翻译 // Humyang </title>
</head>

<body>
<!--[if lte IE 8]> <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'> <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode"><img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari." style='margin-left:auto;margin-right:auto;display: block;'/></a></div> <![endif]-->
  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">Humyang</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>


  <ul id="menu" class="menu">
     
    
      
      <li class="menu-item menu-item-home">
        <a href="/">
          <i class="menu-item-icon icon-home"></i> <br />
          首页
        </a>
      </li>
    
      
      <li class="menu-item menu-item-categories">
        <a href="/categories">
          <i class="menu-item-icon icon-categories"></i> <br />
          分类
        </a>
      </li>
    
      
      <li class="menu-item menu-item-archives">
        <a href="/archives">
          <i class="menu-item-icon icon-archives"></i> <br />
          归档
        </a>
      </li>
    
      
      <li class="menu-item menu-item-tags">
        <a href="/tags">
          <i class="menu-item-icon icon-tags"></i> <br />
          标签
        </a>
      </li>
    
  </ul>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              react-router-redux 翻译
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2016-07-23
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/前端/">前端</a>

              
              
                ， 
              

            
              <a href="/categories/前端/redux/">redux</a>

              
              
                ， 
              

            
              <a href="/categories/前端/redux/router/">router</a>

              
              
                ， 
              

            
              <a href="/categories/前端/redux/router/react/">react</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2016/ciqzftaxp0000l735q59ah641/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2016/ciqzftaxp0000l735q59ah641/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <p>翻译 react-router-redux 的 readme。</p>
<a id="more"></a>
<hr>
<p><a href="https://github.com/reactjs/react-router-redux" target="_blank" rel="external">原文地址</a></p>
<h1 id="react-router-redux">react-router-redux</h1><p>You’re a smart person. You use <a href="https://github.com/rackt/redux" target="_blank" rel="external">Redux</a> to manage your application state. You use <a href="https://github.com/reactjs/react-router" target="_blank" rel="external">React Router</a> to do routing. All is good.</p>
<p>你很智慧。你使用 Redux 管理你的应用程序状态。你也使用 React Router 处理路由操作。都值得称赞。</p>
<p>But the two libraries don’t coordinate. You want to do time travel with your application state, but React Router doesn’t navigate between pages when you replay actions. It controls an important part of application state: the URL.</p>
<p>但这两个库并不协调，比如你想应用程序的 state 实现时间旅行，但当你重放 action 时 React Router 不会切换两个页面。他控制着应用程序状态重要的一部分：URL。</p>
<p>This library helps you keep that bit of state in sync with your Redux store. We keep a copy of the current location hidden in state. When you rewind your application state with a tool like <a href="https://github.com/gaearon/redux-devtools" target="_blank" rel="external">Redux DevTools</a>, that state change is propagated to React Router so it can adjust the component tree accordingly. You can jump around in state, rewinding, replaying, and resetting as much as you’d like, and this library will ensure the two stay in sync at all times.</p>
<p>这个库帮助你使这部分的状态保持与 Redux store 同步。我们会将当前位置信息的一份副本隐藏在 Redux 状态树。当你使用如 Redux DevTools 之类的工具重现应用程序状态时，状态的变更会发送给 React Router 因此可以相应的调整组件树。你可以跳转，重置，重放，这个库会确保任何时候他们两个库都能同步。</p>
<p><strong>This library is not necessary for using Redux together with React Router. You can use the two together just fine without any additional libraries. It is useful if you care about recording, persisting, and replaying user actions, using time travel. If you don’t care about these features, just</strong> <a href="。">use Redux and React Router directly</a>.</p>
<p>同时使用 Redux 和 React Router 时这个库不是必须的。你可以直接使用他们不需要其他额外的库。他只是协助你记录，保存，和重现 action，和时间旅行。如果你不需要这些功能，那么直接使用 Redux 和 React Router 吧。</p>
<h2 id="安装">安装</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save react-router-redux</span><br></pre></td></tr></table></figure>
<p>If you want to install the next major version, use react-router-redux@next. Run npm dist-tag ls react-router-redux to see what next is aliased to.</p>
<p>如果你想安装下一代版本，使用 <code>react-router-redux@next</code>，运行 <code>npm dist-tag ls react-router-redux</code> 查看 <code>next</code> 是什么的别名。</p>
<h2 id="如何工作">如何工作</h2><p>This library allows you to use React Router’s APIs as they are documented. And, you can use redux like you normally would, with a single app state. The library simply enhances a history instance to allow it to synchronize any changes it receives into application state.</p>
<p>你可以直接使用 React Router 文档所描述的 API，和使用 redux 改变单个应用程序的状态就像之前已经习惯的方式。</p>
<p>这个库简单的增强了 history 实例使他可以同步任何从应用程序状态更改接收到内容。</p>
<p><a href="https://github.com/reactjs/history" target="_blank" rel="external">history</a> + store (<a href="https://github.com/reactjs/redux" target="_blank" rel="external">redux</a>) → <a href="https://github.com/reactjs/react-router-redux" target="_blank" rel="external">react-router-redux</a> → enhanced <a href="https://github.com/reactjs/history" target="_blank" rel="external">history</a> → <a href="https://github.com/reactjs/react-router" target="_blank" rel="external">react-router</a></p>
<h2 id="使用指南">使用指南</h2><p>让我们来看一个简单例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore, combineReducers, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Router, Route, browserHistory &#125; <span class="keyword">from</span> <span class="string">'react-router'</span></span><br><span class="line"><span class="keyword">import</span> &#123; syncHistoryWithStore, routerReducer &#125; <span class="keyword">from</span> <span class="string">'react-router-redux'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> reducers <span class="keyword">from</span> <span class="string">'&lt;project-path&gt;/reducers'</span></span><br><span class="line"></span><br><span class="line">// Add the reducer to your store on the `routing` key</span><br><span class="line">const store = createStore(</span><br><span class="line">  combineReducers(&#123;</span><br><span class="line">    ...reducers,</span><br><span class="line">    routing: routerReducer</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// Create an enhanced history that syncs navigation events with the store</span><br><span class="line">const history = syncHistoryWithStore(browserHistory, store)</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &#123; /* Tell the Router to use our enhanced history */ &#125;</span><br><span class="line">    &lt;Router history=&#123;history&#125;&gt;</span><br><span class="line">      &lt;Route path=<span class="string">"/"</span> component=&#123;App&#125;&gt;</span><br><span class="line">        &lt;Route path=<span class="string">"foo"</span> component=&#123;Foo&#125;/&gt;</span><br><span class="line">        &lt;Route path=<span class="string">"bar"</span> component=&#123;Bar&#125;/&gt;</span><br><span class="line">      &lt;/Route&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  &lt;/Provider&gt;,</span><br><span class="line">  document.getElementById(<span class="string">'mount'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>Now any time you navigate, which can come from pressing browser buttons or navigating in your application code, the enhanced history will first pass the new location through the Redux store and then on to React Router to update the component tree. If you time travel, it will also pass the new state to React Router to update the component tree again.</p>
<p>现在所有的导航操作，如按下浏览器的导航按钮或通过程序代码导航，增强型 history 对象首先传递一个新的位置信息到 redux store 然后再传递给 react router 更新组件树。如果执行时间旅行操作，他会传递新的 state 给 react router 再次更新组件树。</p>
<h2 id="如何监视导航事件，例如需要分析用户操作？">如何监视导航事件，例如需要分析用户操作？</h2><p>Simply listen to the enhanced history via <code>history.listen</code>. This takes in a function that will receive a <code>location</code> any time the store updates. This includes any time travel activity performed on the store.</p>
<p>最简单监视增强型 history 对象的方式是通过 <code>history.listen</code>。传递给他的函数将会在 store 更新时接收到  <code>location</code> 对象。包含时间旅行操作对 store 的操作。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> history = syncHistoryWithStore(browserHistory, store)</span><br><span class="line"></span><br><span class="line">history.listen(location =&gt; analyticsService.track(location.pathname))</span><br></pre></td></tr></table></figure>
<p>系统中其他类型的事件，你可以使用 Redux middleware 观察所有 dispatch 给 action 给 store 的操作。</p>
<h2 id="如果在我的_Redux_store_使用了_Immutable-js_或其他_state_wrapper_怎么办？">如果在我的 Redux store 使用了 Immutable.js 或其他 state wrapper 怎么办？</h2><p>When using a wrapper for your store’s state, such as Immutable.js, you will need to change two things from the standard setup:</p>
<pre><code>- By <span class="keyword">default</span>, the library expects <span class="keyword">to</span> find the history <span class="keyword">state</span> at `<span class="keyword">state</span>.routing`. If your wrapper prevents accessing properties directly, or you want <span class="keyword">to</span> put the routing <span class="keyword">state</span> elsewhere, <span class="built_in">pass</span> a selector function <span class="keyword">to</span> access the historystate via the `selectLocationState` option <span class="keyword">on</span> `syncHistoryWithStore`.
- Provide your own reducer function that will receive actions of type `LOCATION_CHANGE` and return the payload merged into the `locationBeforeTransitions` property of the routing <span class="keyword">state</span>. For example, <span class="keyword">state</span>.<span class="built_in">set</span>(<span class="string">"routing"</span>, {locationBeforeTransitions: action.payload}).
</code></pre><p>当你为 store 的 state 使用了 wrapper，例如 Immutable.js，你需要改变标准步骤的两处位置：</p>
<pre><code>- 这个默认库会在 `<span class="keyword">state</span>.routing` 寻找 history <span class="keyword">state</span>。如果你的 wrapper 阻止直接访问 <span class="keyword">state</span> 属性，或你想把 routeing <span class="keyword">state</span> 放到其他地方，请传递一个 selector function 给 `syncHistoryWithStore` 的 `selectLocationState` 参数从而访问 history <span class="keyword">state</span>。
- 提供你自己的 reducer function 并接收类型为 `LOCATION_CHANGE` 的 action，然后返回的 payload 给 rouing <span class="keyword">state</span> 的 `locationBeforeTransitions` 属性。例如  `<span class="keyword">state</span>.<span class="built_in">set</span>(<span class="string">"routing"</span>,{locationBeforeTransitions:action.payload})`。
</code></pre><p>These two hooks will allow you to store the state that this library uses in whatever format or wrapper you would like.</p>
<p>这两个 hook 让你的 store 可以保持 state 的同步，无论使用了哪些格式的 wrapper。</p>
<h2 id="如何在容器组件访问_router_state？">如何在容器组件访问 router state？</h2><p>React Router <a href="https://github.com/reactjs/react-router/blob/latest/docs/Introduction.md#getting-url-parameters" target="_blank" rel="external">provides route information via a route component’s props</a>. This makes it easy to access them from a container component. When using <a href="https://github.com/rackt/react-redux" target="_blank" rel="external">react-redux</a> to connect() your components to state, you can access the router’s props from the <a href="https://github.com/rackt/react-redux/blob/master/docs/api.md#connectmapstatetoprops-mapdispatchtoprops-mergeprops-options" target="_blank" rel="external">2nd argument of mapStateToProps</a>:</p>
<p>React Router 通过 route 组件的 props 提供 route 信息。使他可以轻松的从容器组件访问他们。当使用 react-redux 的 <code>connect()</code> 连接组件和 state 时，你可以通过 mapStateToProps 的第二个参数访问 router 的 props：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapStateToProps</span>(<span class="params">state, ownProps</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">   id: ownProps.params.id,</span><br><span class="line">   filter: ownProps.location.query.filter</span><br><span class="line"> &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>You should not read the location state directly from the Redux store. This is because React Router operates asynchronously (to handle things such as dynamically-loaded components) and your component tree may not yet be updated in sync with your Redux state. You should rely on the props passed by React Router, as they are only updated after it has processed all asynchronous code.</p>
<p>你不应该直接从 Redux store 直接读取 location state。因为 React Router 运算是异步的 (就像动态加载组件一样) 并且你的组件树可能没有与 Redux state 同步更新。你应该依据 React Router 传递的 props 值判断，只有当所有异步代码处理完成后他才会更新。</p>
<h2 id="如果我想通过_Redux_action_实现导航应该怎么做？">如果我想通过 Redux action 实现导航应该怎么做？</h2><p>React Router provides singleton versions of history (<code>browserHistory</code> and <code>hashHistory</code>) that you can import and use from anywhere in your application. However, if you prefer Redux style actions, the library also provides a set of action creators and a middleware to capture them and redirect them to your history instance.</p>
<p>React Router 提供了单例版本的 history (<code>browserHistory</code> 和 <code>hashHistory</code>) 你可以在应用程序任意位置导入和使用他们。但如果你准备使用 Redux 风格的 action，这个库也提供了一系列 action creators 集合和 middleware 实现捕获和重定向到你的 history 实例。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; routerMiddleware, push &#125; <span class="keyword">from</span> <span class="string">'react-router-redux'</span></span><br><span class="line"></span><br><span class="line">// Apply the middleware to the store</span><br><span class="line">const middleware = routerMiddleware(browserHistory)</span><br><span class="line">const store = createStore(</span><br><span class="line">  reducers,</span><br><span class="line">  applyMiddleware(middleware)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// Dispatch <span class="keyword">from</span> anywhere like normal.</span><br><span class="line">store.dispatch(push(<span class="string">'/foo'</span>))</span><br></pre></td></tr></table></figure>
<h2 id="例子">例子</h2><p><a href="https://github.com/reactjs/react-router-redux/blob/master/examples/basic" target="_blank" rel="external">examples/basic</a> - basic reference implementation</p>
<p>Examples from the community:</p>
<ul>
<li><a href="https://github.com/shakacode/react-webpack-rails-tutorial" target="_blank" rel="external">shakacode/react-webpack-rails-tutorial</a> - react-router-redux including <strong>Server Rendering</strong> using <a href="https://github.com/shakacode/react_on_rails/" target="_blank" rel="external">React on Rails</a>, live at <a href="http://www.reactrails.com/" target="_blank" rel="external">www.reactrails.com</a>.</li>
<li><a href="https://github.com/davezuko/react-redux-starter-kit" target="_blank" rel="external">davezuko/react-redux-starter-kit</a> - popular redux starter kit<br>  <strong>tip</strong>: migrating from react-router-redux ^3.0.0? use <a href="https://github.com/davezuko/react-redux-starter-kit/commit/0df26907" target="_blank" rel="external">this commit</a> as a reference</li>
<li><a href="https://github.com/svrcekmichal/universal-react" target="_blank" rel="external">svrcekmichal/universal-react</a> - Universal react app with async actions provided by <a href="https://github.com/svrcekmichal/reasync" target="_blank" rel="external">svrcekmichal/reasync</a> package</li>
<li><a href="https://github.com/StevenIseki/react-router-redux-example" target="_blank" rel="external">steveniseki/react-router-redux-example</a> - minimal react-router-redux example includes css modules and universal rendering</li>
<li><a href="https://github.com/choonkending/react-webpack-node" target="_blank" rel="external">choonkending/react-webpack-node</a> - Full-stack universal Redux App</li>
<li><a href="https://github.com/kuy/treemap-with-router" target="_blank" rel="external">kuy/treemap-with-router</a> - An example for react-router-redux with d3’s treemap.</li>
</ul>
<p><em>→ Have an example to add? Send us a PR! ←</em></p>
<h2 id="API">API</h2><h3 id="routerReducer()"><code>routerReducer()</code></h3><p><strong>You must add this reducer to your store for syncing to work.</strong></p>
<p>你必须添加这个 reducer 到你的 store 实现同步工作</p>
<p>A reducer function that stores location updates from <code>history</code>. If you use <code>combineReducers</code>, it should be nested under the <code>routing</code> key.</p>
<p>sotres location 的 reducer function 从 <code>history</code> 更新。如果你使用了 <code>combineReducers</code>，他需要有一个 <code>routing</code> key。</p>
<h3 id="history_=_syncHistoryWithStore(history,_store,_[options])">history = syncHistoryWithStore(history, store, [options])</h3><p>Creates an enhanced history from the provided history. This history changes <code>history.listen</code> to pass all location updates through the provided store first. This ensures if the store is updated either from a navigation event or from a time travel action, such as a replay, the listeners of the enhanced history will stay in sync.</p>
<p>从给定的 history 创建增强型 history。这个 history 会更改 <code>history.listen</code> ，所有的 location 更新首先会传递给所提供的 store。确保了发生导航事件或时间旅行操作 action，例如重现 action 后 store 是已更新的，增强型 history 的 listener 将会保持同步。</p>
<p><strong>You must provide the enhanced history to your <code>&lt;Router&gt;</code> component.</strong> This ensures your routes stay in sync with your location and your store at the same time.</p>
<p>你必须把增强型 history 传递给你的 <code>&lt;Router&gt;</code> 组件。确保你的 routes 保持与 location 和 store 的同时同步。</p>
<p>The options object takes in the following optional keys:</p>
<pre><code>- `selectLocationState` - (<span class="keyword">default</span> <span class="keyword">state</span> =&gt; <span class="keyword">state</span>.routing) A selector function <span class="keyword">to</span> obtain the history <span class="keyword">state</span> <span class="keyword">from</span> your store. Useful when not using the provided routerReducer <span class="keyword">to</span> store history <span class="keyword">state</span>. Allows you <span class="keyword">to</span> use wrappers, such as Immutable.js.
- `adjustUrlOnReplay` - (<span class="keyword">default</span> true) When false, the URL will not be kept <span class="keyword">in</span> sync during time travel. This is useful when using persistState <span class="keyword">from</span> Redux DevTools and not wanting <span class="keyword">to</span> maintain the URL <span class="keyword">state</span> when restoring <span class="keyword">state</span>.
</code></pre><p><code>options</code> 对象接受以下的选项 key：</p>
<pre><code>- `selectLocationState`-(默认值： `<span class="keyword">state</span> =&gt; <span class="keyword">state</span>.routing`) 一个 selector 函数，从 store 获取 history <span class="keyword">state</span>。当不使用所提供的 routerReducer 到 store history <span class="keyword">state</span> 有用。允许你使用 wrappers，例如 Immutable.js。
- `adjustUrlOnReplay`- (默认值：`true`) 当是 false 时，URL 将不会保持与时间旅行操作一致。当使用 Redux DevToos 的 persistState 并且不想在恢复 <span class="keyword">state</span> 时修改 URL <span class="keyword">state</span> 有用。
</code></pre><h2 id="push(location),_replace(location),_go(number),_goBack(),_goForward()">push(location), replace(location), go(number), goBack(), goForward()</h2><p><strong>你需要安装 <code>routerMiddleware</code> 这些 action 才能工作。</strong></p>
<p>Action creators that correspond with the <a href="。">history methods of the same name</a>. For reference they are defined as follows:</p>
<pre><code>- push - Pushes <span class="operator">a</span> <span class="built_in">new</span> location <span class="built_in">to</span> history, becoming <span class="operator">the</span> current location.
- <span class="built_in">replace</span> - Replaces <span class="operator">the</span> current location <span class="operator">in</span> history.
- go - Moves backwards <span class="operator">or</span> forwards <span class="operator">a</span> <span class="built_in">relative</span> <span class="built_in">number</span> <span class="operator">of</span> locations <span class="operator">in</span> history.
- goForward - Moves forward <span class="constant">one</span> location. Equivalent <span class="built_in">to</span> go(<span class="number">1</span>)
- goBack - Moves backwards <span class="constant">one</span> location. Equivalent <span class="built_in">to</span> go(-<span class="number">1</span>)
</code></pre><p>Both push and replace take in a location descriptor, which can be an object describing the URL or a plain string URL.</p>
<p>These action creators are also available in one single object as routerActions, which can be used as a convenience when using Redux’s bindActionCreators().</p>
<p>这些 action creator 的作用与 history 方法同名，他们的参考作用在下方定义：</p>
<pre><code>-<span class="ruby"> push -  推送一个新的 location 到 history,变为当前 location。
</span>-<span class="ruby"> replace - 替换 hisrory 的当前 location。
</span>-<span class="ruby"> go - 根据相对数字后退或前进 history location。
</span>-<span class="ruby"> goForward - 前进一个 location。等于 go(<span class="number">1</span>);
</span>-<span class="ruby"> goBack - 后退一个 location。等于 go(-<span class="number">1</span>);</span>
</code></pre><p>push 和 replace 在 <a href="。">location descriptor</a> 用到了，他可以是一个描述 URL 的 object 或原生字符串 URL。</p>
<p>这个 action creator 也可以在一个单独的 object 使用：<code>routerActions</code>，当使用 Redux 的 <code>bindActionCreator()</code> 时他可以被方便的使用。</p>
<h2 id="routerMiddleware(history)">routerMiddleware(history)</h2><p>A middleware you can apply to your Redux store to capture dispatched actions created by the action creators. It will redirect those actions to the provided history instance.</p>
<p>一个中间件，你可以应用到你的 Redux store 中以捕获由 action creator 发出的 actions。他将会重定向这个 action 到你提供的 history 实例。</p>
<h2 id="LOCATION_CHANGE"><code>LOCATION_CHANGE</code></h2><p>An action type that you can listen for in your reducers to be notified of route updates. Fires after any changes to history.</p>
<p>一个 action 类型，你可以在你的 reducer 监听以通知 route 更新，会在任意 history 更新后触发。</p>

      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/前端/"> #前端 </a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/3015/FrontEndNavigation/">前端 EXAMPLE 导航</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/ciqxkg03s000c4y35ing4rac1/">Redux (五) Middleware</a>
            
          </div>
        </div>
      

      
      
    </div>
  </div>



    
      <div class="comments" id="comments">
        
          <div class="ds-thread" data-thread-key="2016/ciqzftaxp0000l735q59ah641/"
               data-title="react-router-redux 翻译" data-url="http://yoursite.com/2016/ciqzftaxp0000l735q59ah641/">
          </div>
        
      </div>
    
  </div>


        </div>

        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="Humyang" />
          <p class="site-author-name">Humyang</p>
        </div>
        <p class="site-description motion-element"></p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">65</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">31</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">9</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </div>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="http://weibo.com/yspace" target="_blank">weibo</a>
            </span>
            
          
        </div>

        
        

      </div>

      
        <div class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#react-router-redux"><span class="nav-number">1.</span> <span class="nav-text">react-router-redux</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装"><span class="nav-number">1.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如何工作"><span class="nav-number">1.2.</span> <span class="nav-text">如何工作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用指南"><span class="nav-number">1.3.</span> <span class="nav-text">使用指南</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如何监视导航事件，例如需要分析用户操作？"><span class="nav-number">1.4.</span> <span class="nav-text">如何监视导航事件，例如需要分析用户操作？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如果在我的_Redux_store_使用了_Immutable-js_或其他_state_wrapper_怎么办？"><span class="nav-number">1.5.</span> <span class="nav-text">如果在我的 Redux store 使用了 Immutable.js 或其他 state wrapper 怎么办？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如何在容器组件访问_router_state？"><span class="nav-number">1.6.</span> <span class="nav-text">如何在容器组件访问 router state？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如果我想通过_Redux_action_实现导航应该怎么做？"><span class="nav-number">1.7.</span> <span class="nav-text">如果我想通过 Redux action 实现导航应该怎么做？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#例子"><span class="nav-number">1.8.</span> <span class="nav-text">例子</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#API"><span class="nav-number">1.9.</span> <span class="nav-text">API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#routerReducer()"><span class="nav-number">1.9.1.</span> <span class="nav-text">routerReducer()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#history_=_syncHistoryWithStore(history,_store,_[options])"><span class="nav-number">1.9.2.</span> <span class="nav-text">history = syncHistoryWithStore(history, store, [options])</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#push(location),_replace(location),_go(number),_goBack(),_goForward()"><span class="nav-number">1.10.</span> <span class="nav-text">push(location), replace(location), go(number), goBack(), goForward()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#routerMiddleware(history)"><span class="nav-number">1.11.</span> <span class="nav-text">routerMiddleware(history)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LOCATION_CHANGE"><span class="nav-number">1.12.</span> <span class="nav-text">LOCATION_CHANGE</span></a></li></ol></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </div>
      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2016
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Humyang</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('.content img').each(function () {
        var $image = $(this);
        var $imageWrapLink = $image.parent('a');

        if ($imageWrapLink.size() < 1) {
          $imageWrapLink = $image.wrap('<a href="' + this.getAttribute('src') + '"></a>').parent('a');
        }
        $imageWrapLink.addClass('fancybox');
      });
    });
    $('.fancybox').fancybox({
      helpers: {
        overlay: {
          locked: false
        }
      }
    });
  </script>


  <script type="text/javascript">
  function hasMobileUA () {
    var nav = window.navigator;
    var ua = nav.userAgent;
    var pa = /iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;

    return pa.test(ua);
  }

  function isDesktop () {
    return screen.width > 991 && !hasMobileUA();
  }

  function isTablet () {
    return screen.width < 992 && screen.width > 767 && hasMobileUA();
  }

  function isMobile () {
    return screen.width < 767 && hasMobileUA();
  }

  function escapeSelector (selector) {
    return selector.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, "\\$&")
  }
</script>

  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" id="motion.global">
  $(document).ready(function () {
    var body = $('body');
    var isSidebarVisible = false;
    var sidebarToggle = $('.sidebar-toggle');
    var sidebarToggleLine1st = $('.sidebar-toggle-line-first')
    var sidebarToggleLine2nd = $('.sidebar-toggle-line-middle');
    var sidebarToggleLine3rd = $('.sidebar-toggle-line-last');
    var sidebar = $('.sidebar');

    var SIDEBAR_WIDTH = '320px';
    var SIDEBAR_DISPLAY_DURATION = 300;

    var sidebarToogleLineStatusInit = {width: '100%', opacity: 1, left: 0, rotateZ: 0, top: 0};

    var sidebarToggleLine1stStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine1stStatusArrow = {width: '50%', rotateZ: '-45deg', top: '2px'};
    var sidebarToogleLine1stStatusClose = {width: '100%', rotateZ: '-45deg', top: '5px'};

    var sidebarToggleLine2ndStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine2ndStatusArrow = {width: '90%'};
    var sidebarToogleLine2ndStatusClose = {opacity: 0};

    var sidebarToggleLine3rdStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine3rdStatusArrow = {width: '50%', rotateZ: '45deg', top: '-2px'};
    var sidebarToogleLine3rdStatusClose = {width: '100%', rotateZ: '45deg', top: '-5px'};

    LogoAndMenuMotion();
    sidebatToggleMotion();
    postsListMotion();
    backToTopMotion();


    $(document)
      .on('sidebar.isShowing', function () {
        isDesktop() && body.velocity(
          {paddingRight: SIDEBAR_WIDTH},
          SIDEBAR_DISPLAY_DURATION
        );
        sidebarContentMotion();
      })
      .on('sidebar.isHiding', function () {});

    function LogoAndMenuMotion() {
      $.Velocity.RunSequence([
        { e: $('.brand'), p: { opacity: 1 }, o: { duration: 100 } },
        { e: $('.logo'), p: { opacity: 1, top: 0 }, o: { duration: 50} },
        
        { e: $('.logo-line-before i'), p: { translateX: "100%" }, o: { duration: 500, sequenceQueue: false } },
        { e: $('.logo-line-after i'), p: { translateX: "-100%" }, o: { duration: 500, sequenceQueue: false } },
        
        { e: $('.site-title'), p: { opacity: 1, top: 0 }, o: { duration: 200 } }
      ]);
      $('.menu-item').velocity('transition.slideDownIn', {display: null});
    }


    function backToTopMotion () {
      var b2top = $('.back-to-top');
      b2top.on('click', function () {
        body.velocity('scroll');
      });
    }

    function sidebarShowMotion () {

      sidebarToggleLine1st.velocity(sidebarToogleLine1stStatusClose);
      sidebarToggleLine2nd.velocity(sidebarToogleLine2ndStatusClose);
      sidebarToggleLine3rd.velocity(sidebarToogleLine3rdStatusClose);

      sidebar.velocity({width: SIDEBAR_WIDTH}, {
        display: 'block',
        duration: SIDEBAR_DISPLAY_DURATION,
        complete: function () {
          sidebar.addClass('sidebar-active');
          sidebar.trigger('sidebar.didShow');
        }
      });
      sidebar.trigger('sidebar.isShowing');
    }

    function sidebarHideMotion () {
      isDesktop() && body.velocity({paddingRight: 0});
      sidebar.velocity('reverse');

      sidebarToggleLine1st.velocity(sidebarToggleLine1stStatusInit);
      sidebarToggleLine2nd.velocity(sidebarToggleLine2ndStatusInit);
      sidebarToggleLine3rd.velocity(sidebarToggleLine3rdStatusInit);

      sidebar.removeClass('sidebar-active');
      sidebar.trigger('sidebar.isHiding');
    };

    function sidebarContentMotion () {
      $('.sidebar .motion-element').velocity(
        'transition.slideRightIn',
        {stagger: 50, drag: true}
      );
    }

    function postsListMotion () {
      var postMotionOptions = window.postMotionOptions || {stagger: 300, drag: true};
      $('.post').velocity('transition.slideDownIn', postMotionOptions);
    }

    function sidebatToggleMotion () {
      sidebarToggle.on('click', function () {
        isSidebarVisible ? sidebarHideMotion() : sidebarShowMotion();
        isSidebarVisible = !isSidebarVisible;
      });

      sidebarToggle.hover(function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusArrow);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusArrow);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusArrow);
      }, function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusInit);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusInit);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusInit);
      });
    }
  });

</script>





  
  
<script type="text/javascript" id="bootstrap.scrollspy.custom">
  /* ========================================================================
  * Bootstrap: scrollspy.js v3.3.2
  * http://getbootstrap.com/javascript/#scrollspy
  * ========================================================================
  * Copyright 2011-2015 Twitter, Inc.
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  * ======================================================================== */

  /**
   * Custom by iissnan
   *
   * - Add a `clear.bs.scrollspy` event.
   * - Esacpe targets selector.
   */


  +function ($) {
    'use strict';

    // SCROLLSPY CLASS DEFINITION
    // ==========================

    function ScrollSpy(element, options) {
      this.$body          = $(document.body)
      this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)
      this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)
      this.selector       = (this.options.target || '') + ' .nav li > a'
      this.offsets        = []
      this.targets        = []
      this.activeTarget   = null
      this.scrollHeight   = 0

      this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))
      this.refresh()
      this.process()
    }

    ScrollSpy.VERSION  = '3.3.2'

    ScrollSpy.DEFAULTS = {
      offset: 10
    }

    ScrollSpy.prototype.getScrollHeight = function () {
      return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    }

    ScrollSpy.prototype.refresh = function () {
      var that          = this
      var offsetMethod  = 'offset'
      var offsetBase    = 0

      this.offsets      = []
      this.targets      = []
      this.scrollHeight = this.getScrollHeight()

      if (!$.isWindow(this.$scrollElement[0])) {
        offsetMethod = 'position'
        offsetBase   = this.$scrollElement.scrollTop()
      }

      this.$body
        .find(this.selector)
        .map(function () {
          var $el   = $(this)
          var href  = $el.data('target') || $el.attr('href')
          var $href = /^#./.test(href) && $(escapeSelector(href)) // Need to escape selector.

          return ($href
            && $href.length
            && $href.is(':visible')
            && [[$href[offsetMethod]().top + offsetBase, href]]) || null
        })
        .sort(function (a, b) { return a[0] - b[0] })
        .each(function () {
          that.offsets.push(this[0])
          that.targets.push(this[1])
        })


    }

    ScrollSpy.prototype.process = function () {
      var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset
      var scrollHeight = this.getScrollHeight()
      var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()
      var offsets      = this.offsets
      var targets      = this.targets
      var activeTarget = this.activeTarget
      var i

      if (this.scrollHeight != scrollHeight) {
        this.refresh()
      }

      if (scrollTop >= maxScroll) {
        return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)
      }

      if (activeTarget && scrollTop < offsets[0]) {
        $(this.selector).trigger('clear.bs.scrollspy')  // Add a custom event.
        this.activeTarget = null
        return this.clear()
      }

      for (i = offsets.length; i--;) {
        activeTarget != targets[i]
          && scrollTop >= offsets[i]
          && (!offsets[i + 1] || scrollTop <= offsets[i + 1])
          && this.activate(targets[i])
      }
    }

    ScrollSpy.prototype.activate = function (target) {
      this.activeTarget = target

      this.clear()

      var selector = this.selector +
        '[data-target="' + target + '"],' +
        this.selector + '[href="' + target + '"]'

      var active = $(selector)
        .parents('li')
        .addClass('active')

      if (active.parent('.dropdown-menu').length) {
        active = active
          .closest('li.dropdown')
          .addClass('active')
      }

      active.trigger('activate.bs.scrollspy')
    }

    ScrollSpy.prototype.clear = function () {
      $(this.selector)
        .parentsUntil(this.options.target, '.active')
        .removeClass('active')
    }


    // SCROLLSPY PLUGIN DEFINITION
    // ===========================

    function Plugin(option) {
      return this.each(function () {
        var $this   = $(this)
        var data    = $this.data('bs.scrollspy')
        var options = typeof option == 'object' && option

        if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))
        if (typeof option == 'string') data[option]()
      })
    }

    var old = $.fn.scrollspy

    $.fn.scrollspy             = Plugin
    $.fn.scrollspy.Constructor = ScrollSpy


    // SCROLLSPY NO CONFLICT
    // =====================

    $.fn.scrollspy.noConflict = function () {
      $.fn.scrollspy = old
      return this
    }


    // SCROLLSPY DATA-API
    // ==================

    $(window).on('load.bs.scrollspy.data-api', function () {
      $('[data-spy="scroll"]').each(function () {
        var $spy = $(this)
        Plugin.call($spy, $spy.data())
      })
    })

  }(jQuery);
</script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var $sidebarInner = $('.sidebar-inner');
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.didShow', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;
          var self = this;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      $(indicator).velocity('stop').velocity({
        opacity: action === 'show' ? 0.4 : 0
      }, { duration: 100 });
    }

  });
</script>


  <script type="text/javascript" id="sidebar.nav">
    $(document).ready(function () {
      var html = $('html');

      $('.sidebar-nav li').on('click', function () {
        var item = $(this);
        var activeTabClassName = 'sidebar-nav-active';
        var activePanelClassName = 'sidebar-panel-active';
        if (item.hasClass(activeTabClassName)) {
          return;
        }

        var currentTarget = $('.' + activePanelClassName);
        var target = $('.' + item.data('target'));

        currentTarget.velocity('transition.slideUpOut', 200, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', 200)
            .addClass(activePanelClassName);
        });

        item.siblings().removeClass(activeTabClassName);
        item.addClass(activeTabClassName);
      });

      $('.post-toc a').on('click', function (e) {
        e.preventDefault();
        var offset = $(escapeSelector(this.getAttribute('href'))).offset().top;
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        });
      });

      // Expand sidebar on post detail page by default, when post has a toc.
      var $tocContent = $('.post-toc-content');
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0 && isDesktop()) {
        setTimeout(function () {
          $('.sidebar-toggle').trigger('click');
        }, 800);
      }
    });
  </script>




  

  
  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"humyang"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  


  
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62263979-1', 'auto');
  ga('send', 'pageview');
  </script>

</body>
</html>
